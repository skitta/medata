"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[551],{2551:function(e,a,t){t.r(a),t.d(a,{default:function(){return O}});var l=t(3396),r=t(7139);const u=(0,l.Uk)("男"),o=(0,l.Uk)("女"),n=(0,l.Uk)("是"),i=(0,l.Uk)("否"),m=(0,l.Uk)("是"),s=(0,l.Uk)("否"),d=(0,l.Uk)("确认");function v(e,a,t,v,f,p){const c=(0,l.up)("a-input"),g=(0,l.up)("a-form-item"),w=(0,l.up)("a-select-option"),_=(0,l.up)("a-select"),h=(0,l.up)("a-input-number"),b=(0,l.up)("a-date-picker"),S=(0,l.up)("a-radio"),W=(0,l.up)("a-radio-group"),P=(0,l.up)("a-button"),U=(0,l.up)("a-form"),k=(0,l.up)("a-modal"),I=(0,l.up)("a-card");return(0,l.wg)(),(0,l.j4)(I,{title:"添加新患者"},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{name:"Patient",ref:"formRef",model:e.formState,rules:e.rules,"label-col":{span:4},"wrapper-col":{span:18}},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{label:"登记号",name:"registered_ID"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{value:e.formState.registered_ID,"onUpdate:value":a[0]||(a[0]=a=>e.formState.registered_ID=a)},null,8,["value"])])),_:1}),(0,l.Wm)(g,{label:"住院号",name:"document_ID"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{value:e.formState.document_ID,"onUpdate:value":a[1]||(a[1]=a=>e.formState.document_ID=a)},null,8,["value"])])),_:1}),(0,l.Wm)(g,{label:"姓名",name:"full_name"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{value:e.formState.full_name,"onUpdate:value":a[2]||(a[2]=a=>e.formState.full_name=a)},null,8,["value"])])),_:1}),(0,l.Wm)(g,{label:"性别",name:"gender"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{value:e.formState.gender,"onUpdate:value":a[3]||(a[3]=a=>e.formState.gender=a)},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{value:"M"},{default:(0,l.w5)((()=>[u])),_:1}),(0,l.Wm)(w,{value:"F"},{default:(0,l.w5)((()=>[o])),_:1})])),_:1},8,["value"])])),_:1}),(0,l.Wm)(g,{label:"年龄(月)",name:"age"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{value:e.formState.age,"onUpdate:value":a[4]||(a[4]=a=>e.formState.age=a),style:{width:"100%"}},null,8,["value"])])),_:1}),(0,l.Wm)(g,{label:"入院日期",name:"in_date"},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{value:e.formState.in_date,"onUpdate:value":a[5]||(a[5]=a=>e.formState.in_date=a),"value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["value"])])),_:1}),(0,l.Wm)(g,{label:"身高(cm)",name:"height"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{value:e.formState.height,"onUpdate:value":a[6]||(a[6]=a=>e.formState.height=a),style:{width:"100%"}},null,8,["value"])])),_:1}),(0,l.Wm)(g,{label:"体重(kg)",name:"weight"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{value:e.formState.weight,"onUpdate:value":a[7]||(a[7]=a=>e.formState.weight=a),style:{width:"100%"}},null,8,["value"])])),_:1}),(0,l.Wm)(g,{label:"分组",value:e.formState.group,"onUpdate:value":a[9]||(a[9]=a=>e.formState.group=a),name:"group"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{value:e.formState.group,"onUpdate:value":a[8]||(a[8]=a=>e.formState.group=a),options:e.groupOptions},null,8,["value","options"])])),_:1},8,["value"]),(0,l.Wm)(g,{label:"IVIG 抵抗",value:e.formState.resistance,"onUpdate:value":a[11]||(a[11]=a=>e.formState.resistance=a),name:"resistance"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{value:e.formState.resistance,"onUpdate:value":a[10]||(a[10]=a=>e.formState.resistance=a)},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{value:!0},{default:(0,l.w5)((()=>[n])),_:1}),(0,l.Wm)(S,{value:!1},{default:(0,l.w5)((()=>[i])),_:1})])),_:1},8,["value"])])),_:1},8,["value"]),(0,l.Wm)(g,{label:"复发病历",value:e.formState.relapse,"onUpdate:value":a[13]||(a[13]=a=>e.formState.relapse=a),name:"relapse"},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{value:e.formState.relapse,"onUpdate:value":a[12]||(a[12]=a=>e.formState.relapse=a)},{default:(0,l.w5)((()=>[(0,l.Wm)(S,{value:!0},{default:(0,l.w5)((()=>[m])),_:1}),(0,l.Wm)(S,{value:!1},{default:(0,l.w5)((()=>[s])),_:1})])),_:1},8,["value"])])),_:1},8,["value"]),(0,l.Wm)(g,{"wrapper-col":{span:14,offset:4}},{default:(0,l.w5)((()=>[(0,l.Wm)(P,{type:"primary",onClick:e.showModal},{default:(0,l.w5)((()=>[d])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"]),(0,l.Wm)(k,{visible:e.modalVisible,"onUpdate:visible":a[14]||(a[14]=a=>e.modalVisible=a),title:"确认信息",onOk:e.handleOk,"confirm-loading":e.confireLoading},{default:(0,l.w5)((()=>[(0,l._)("p",null,(0,r.zw)(e.modalMsg),1)])),_:1},8,["visible","onOk","confirm-loading"])])),_:1})}t(1350);var f=t(2074),p=(t(1184),t(9535)),c=(t(4535),t(5676)),g=(t(5703),t(5835)),w=(t(1409),t(7510)),_=(t(4348),t(278)),h=(t(7358),t(5370)),b=(t(8710),t(641)),S=(t(3680),t(2389)),W=(t(6566),t(6823)),P=t(4870),U=t(65),k=t(7424),I=t(678);const{Item:Z}=W.ZP,{Option:A}=S.ZP,{Group:j}=b.ZP;var y=(0,l.aZ)({name:"AddPatientView",components:{ACard:h.ZP,AForm:W.ZP,AFormItem:Z,AInput:_.ZP,ASelect:S.ZP,ASelectOption:A,ADatePicker:w.ZP,AInputNumber:g.Z,AButton:c.Z,AModal:p.Z,ARadioGroup:j,ARadio:b.ZP},setup(){const e=(0,P.iH)(),a=(0,P.qj)({registered_ID:"",document_ID:"",full_name:"",gender:"",age:void 0,in_date:void 0,height:void 0,weight:void 0,group:"",resistance:!1,relapse:!1}),t=(0,P.iH)([]);(0,l.bv)((async()=>{t.value=await(0,k.jA)()}));const r=(0,P.iH)(!1),u=(0,P.iH)(""),o=(0,P.iH)(!1);let n=async(e,a)=>a?Number.isInteger(a)?a<0?Promise.reject("年龄不能小于0"):Promise.resolve():Promise.reject("年龄必须为整数"):Promise.reject("请输入年龄"),i=async(e,a)=>a?a<0?Promise.reject("不能小于0"):Promise.resolve():Promise.reject("请输入数字"),m={};const s=async(e,a)=>{if(!a)return Promise.reject("请输入登记号");try{const e=await(0,k.X4)({search:a});return e.count>0?(m=e.results[0],u.value="登记号已存在，是否直接加载？",r.value=!0,Promise.reject("登记号已存在")):(m={},u.value="",r.value=!1,Promise.resolve())}catch(t){return console.log(t),Promise.reject("检索登记号失败")}},d={registered_ID:[{required:!0,validator:s,trigger:"blur"}],full_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"blur"}],age:[{required:!0,validator:n,trigger:"blur"}],in_date:[{required:!0,message:"请选择日期",trigger:"blur"}],height:[{required:!0,validator:i,trigger:"blur"}],weight:[{required:!0,validator:i,trigger:"blur"}],group:[{required:!0,message:"请选择分组",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},v=()=>{e.value.validate().then((()=>{u.value="确认后部分字段将无法更改，是否确认？",r.value=!0})).catch((e=>{console.log(e)}))},p=(0,U.oR)(),c=(0,I.tv)(),g=()=>{o.value=!0,Object.keys(m).length>0?(0,k.cg)(m.id).then((e=>{p.dispatch("setTests",e),p.dispatch("setPatient",m),o.value=!1,r.value=!1,c.push({name:"add-tests"})})).catch((e=>{console.log(e),o.value=!1,u.value="加载数据失败",f.ZP.error("加载数据失败")})):(0,k.b$)((0,P.IU)(a)).then((e=>{p.dispatch("setPatient",e),p.dispatch("setTests",{}),o.value=!1,r.value=!1,c.push({name:"add-tests"})})).catch((e=>{console.log(e),o.value=!1,u.value="提交数据失败",f.ZP.error("提交数据失败")}))};return{formRef:e,formState:a,groupOptions:t,modalVisible:r,modalMsg:u,confireLoading:o,rules:d,showModal:v,handleOk:g}}}),D=t(89);const q=(0,D.Z)(y,[["render",v]]);var O=q}}]);
//# sourceMappingURL=551.2f59068f.js.map