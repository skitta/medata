import{a8 as xe,P as w,d as O,_ as d,a as G,k as Q,c,x as y,aq as $e,T as he,al as Se,M as De,am as we,s as S,l as Y,t as ae,W as Le,v as U,ar as We,as as je,i as Ve,m as _e,E as Ge,a0 as Ke,a7 as Xe,at as ie,j as Ue,ae as qe,af as Z,a4 as ke,Y as _,O as Qe,q as Ye,au as Ze,av as Je,aw as eo,ax as oo,ay as no,az as de,aA as to,aB as lo,aC as ao,aD as io,aE as ro,e as so,aF as co}from"./index-BiGCB4QH.js";import{q as uo,i as J,K as ue,r as fo,j as mo,s as po,v as go}from"./index-DIUhM0Ao.js";import{o as Te}from"./Dropdown-BEWj0Aq1.js";import{p as vo}from"./index-B7_ea9DU.js";import{B as te,c as Be}from"./index-Cci2ZnYS.js";import{c as Co}from"./Col-b7LGXneF.js";const yo=new xe("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),bo=new xe("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),xo=function(e){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:t}=e,n=`${t}-fade`,l=o?"&":"";return[uo(n,yo,bo,e.motionDurationMid,o),{[`
        ${l}${n}-enter,
        ${l}${n}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${l}${n}-leave`]:{animationTimingFunction:"linear"}}]};function re(){return{keyboard:{type:Boolean,default:void 0},mask:{type:Boolean,default:void 0},afterClose:Function,closable:{type:Boolean,default:void 0},maskClosable:{type:Boolean,default:void 0},visible:{type:Boolean,default:void 0},destroyOnClose:{type:Boolean,default:void 0},mousePosition:w.shape({x:Number,y:Number}).loose,title:w.any,footer:w.any,transitionName:String,maskTransitionName:String,animation:w.any,maskAnimation:w.any,wrapStyle:{type:Object,default:void 0},bodyStyle:{type:Object,default:void 0},maskStyle:{type:Object,default:void 0},prefixCls:String,wrapClassName:String,rootClassName:String,width:[String,Number],height:[String,Number],zIndex:Number,bodyProps:w.any,maskProps:w.any,wrapProps:w.any,getContainer:w.any,dialogStyle:{type:Object,default:void 0},dialogClass:String,closeIcon:w.any,forceRender:{type:Boolean,default:void 0},getOpenCount:Function,focusTriggerAfterClose:{type:Boolean,default:void 0},onClose:Function,modalRender:Function}}function fe(e,o,t){let n=o;return!n&&t&&(n=`${e}-${t}`),n}let me=-1;function $o(){return me+=1,me}function pe(e,o){let t=e[`page${o?"Y":"X"}Offset`];const n=`scroll${o?"Top":"Left"}`;if(typeof t!="number"){const l=e.document;t=l.documentElement[n],typeof t!="number"&&(t=l.body[n])}return t}function ho(e){const o=e.getBoundingClientRect(),t={left:o.left,top:o.top},n=e.ownerDocument,l=n.defaultView||n.parentWindow;return t.left+=pe(l),t.top+=pe(l,!0),t}const So={width:0,height:0,overflow:"hidden",outline:"none"},wo={outline:"none"},To=O({compatConfig:{MODE:3},name:"DialogContent",inheritAttrs:!1,props:d(d({},re()),{motionName:String,ariaId:String,onVisibleChanged:Function,onMousedown:Function,onMouseup:Function}),setup(e,o){let{expose:t,slots:n,attrs:l}=o;const s=G(),u=G(),f=G();t({focus:()=>{var a;(a=s.value)===null||a===void 0||a.focus({preventScroll:!0})},changeActive:a=>{const{activeElement:r}=document;a&&r===u.value?s.value.focus({preventScroll:!0}):!a&&r===s.value&&u.value.focus({preventScroll:!0})}});const b=G(),p=Q(()=>{const{width:a,height:r}=e,v={};return a!==void 0&&(v.width=typeof a=="number"?`${a}px`:a),r!==void 0&&(v.height=typeof r=="number"?`${r}px`:r),b.value&&(v.transformOrigin=b.value),v}),m=()=>{De(()=>{if(f.value){const a=ho(f.value);b.value=e.mousePosition?`${e.mousePosition.x-a.left}px ${e.mousePosition.y-a.top}px`:""}})},i=a=>{e.onVisibleChanged(a)};return()=>{var a,r,v,x;const{prefixCls:h,footer:g=(a=n.footer)===null||a===void 0?void 0:a.call(n),title:$=(r=n.title)===null||r===void 0?void 0:r.call(n),ariaId:C,closable:T,closeIcon:B=(v=n.closeIcon)===null||v===void 0?void 0:v.call(n),onClose:F,bodyStyle:I,bodyProps:z,onMousedown:N,onMouseup:H,visible:D,modalRender:L=n.modalRender,destroyOnClose:K,motionName:A}=e;let W;g&&(W=c("div",{class:`${h}-footer`},[g]));let j;$&&(j=c("div",{class:`${h}-header`},[c("div",{class:`${h}-title`,id:C},[$])]));let E;T&&(E=c("button",{type:"button",onClick:F,"aria-label":"Close",class:`${h}-close`},[B||c("span",{class:`${h}-close-x`},null)]));const M=c("div",{class:`${h}-content`},[E,j,c("div",y({class:`${h}-body`,style:I},z),[(x=n.default)===null||x===void 0?void 0:x.call(n)]),W]),ee=$e(A);return c(he,y(y({},ee),{},{onBeforeEnter:m,onAfterEnter:()=>i(!0),onAfterLeave:()=>i(!1)}),{default:()=>[D||!K?Se(c("div",y(y({},l),{},{ref:f,key:"dialog-element",role:"document",style:[p.value,l.style],class:[h,l.class],onMousedown:N,onMouseup:H}),[c("div",{tabindex:0,ref:s,style:wo},[L?L({originVNode:M}):M]),c("div",{tabindex:0,ref:u,style:So},null)]),[[we,D]]):null]})}}}),Bo=O({compatConfig:{MODE:3},name:"DialogMask",props:{prefixCls:String,visible:Boolean,motionName:String,maskProps:Object},setup(e,o){return()=>{const{prefixCls:t,visible:n,maskProps:l,motionName:s}=e,u=$e(s);return c(he,u,{default:()=>[Se(c("div",y({class:`${t}-mask`},l),null),[[we,n]])]})}}}),ge=O({compatConfig:{MODE:3},name:"VcDialog",inheritAttrs:!1,props:J(d(d({},re()),{getOpenCount:Function,scrollLocker:Object}),{mask:!0,visible:!1,keyboard:!0,closable:!0,maskClosable:!0,destroyOnClose:!1,prefixCls:"rc-dialog",getOpenCount:()=>null,focusTriggerAfterClose:!0}),setup(e,o){let{attrs:t,slots:n}=o;const l=S(),s=S(),u=S(),f=S(e.visible),b=S(`vcDialogTitle${$o()}`),p=g=>{var $,C;if(g)We(s.value,document.activeElement)||(l.value=document.activeElement,($=u.value)===null||$===void 0||$.focus());else{const T=f.value;if(f.value=!1,e.mask&&l.value&&e.focusTriggerAfterClose){try{l.value.focus({preventScroll:!0})}catch{}l.value=null}T&&((C=e.afterClose)===null||C===void 0||C.call(e))}},m=g=>{var $;($=e.onClose)===null||$===void 0||$.call(e,g)},i=S(!1),a=S(),r=()=>{clearTimeout(a.value),i.value=!0},v=()=>{a.value=setTimeout(()=>{i.value=!1})},x=g=>{if(!e.maskClosable)return null;i.value?i.value=!1:s.value===g.target&&m(g)},h=g=>{if(e.keyboard&&g.keyCode===ue.ESC){g.stopPropagation(),m(g);return}e.visible&&g.keyCode===ue.TAB&&u.value.changeActive(!g.shiftKey)};return Y(()=>e.visible,()=>{e.visible&&(f.value=!0)},{flush:"post"}),ae(()=>{var g;clearTimeout(a.value),(g=e.scrollLocker)===null||g===void 0||g.unLock()}),Le(()=>{var g,$;(g=e.scrollLocker)===null||g===void 0||g.unLock(),f.value&&(($=e.scrollLocker)===null||$===void 0||$.lock())}),()=>{const{prefixCls:g,mask:$,visible:C,maskTransitionName:T,maskAnimation:B,zIndex:F,wrapClassName:I,rootClassName:z,wrapStyle:N,closable:H,maskProps:D,maskStyle:L,transitionName:K,animation:A,wrapProps:W,title:j=n.title}=e,{style:E,class:M}=t;return c("div",y({class:[`${g}-root`,z]},vo(e,{data:!0})),[c(Bo,{prefixCls:g,visible:$&&C,motionName:fe(g,T,B),style:d({zIndex:F},L),maskProps:D},null),c("div",y({tabIndex:-1,onKeydown:h,class:U(`${g}-wrap`,I),ref:s,onClick:x,role:"dialog","aria-labelledby":j?b.value:null,style:d(d({zIndex:F},N),{display:f.value?null:"none"})},W),[c(To,y(y({},Te(e,["scrollLocker"])),{},{style:E,class:M,onMousedown:r,onMouseup:v,ref:u,closable:H,ariaId:b.value,prefixCls:g,visible:C,onClose:m,onVisibleChanged:p,motionName:fe(g,K,A)}),n)])])}}}),Po=re(),Fo=O({compatConfig:{MODE:3},name:"DialogWrap",inheritAttrs:!1,props:J(Po,{visible:!1}),setup(e,o){let{attrs:t,slots:n}=o;const l=G(e.visible);return je({},{inTriggerContext:!1}),Y(()=>e.visible,()=>{e.visible&&(l.value=!0)},{flush:"post"}),()=>{const{visible:s,getContainer:u,forceRender:f,destroyOnClose:b=!1,afterClose:p}=e;let m=d(d(d({},e),t),{ref:"_component",key:"dialog"});return u===!1?c(ge,y(y({},m),{},{getOpenCount:()=>2}),n):!f&&b&&!l.value?null:c(fo,{autoLock:!0,visible:s,forceRender:f,getContainer:u},{default:i=>(m=d(d(d({},m),i),{afterClose:()=>{p?.(),l.value=!1}}),c(ge,m,n))})}}});function ve(e){return{position:e,top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0}}const Io=e=>{const{componentCls:o}=e;return[{[`${o}-root`]:{[`${o}${e.antCls}-zoom-enter, ${o}${e.antCls}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"},[`${o}${e.antCls}-zoom-leave ${o}-content`]:{pointerEvents:"none"},[`${o}-mask`]:d(d({},ve("fixed")),{zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask,[`${o}-hidden`]:{display:"none"}}),[`${o}-wrap`]:d(d({},ve("fixed")),{overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${o}-root`]:xo(e)}]},Mo=e=>{const{componentCls:o}=e;return[{[`${o}-root`]:{[`${o}-wrap`]:{zIndex:e.zIndexPopupBase,position:"fixed",inset:0,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"},[`${o}-wrap-rtl`]:{direction:"rtl"},[`${o}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[o]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${e.screenSMMax})`]:{[o]:{maxWidth:"calc(100vw - 16px)",margin:`${e.marginXS} auto`},[`${o}-centered`]:{[o]:{flex:1}}}}},{[o]:d(d({},Ge(e)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${e.margin*2}px)`,margin:"0 auto",paddingBottom:e.paddingLG,[`${o}-title`]:{margin:0,color:e.modalHeadingColor,fontWeight:e.fontWeightStrong,fontSize:e.modalHeaderTitleFontSize,lineHeight:e.modalHeaderTitleLineHeight,wordWrap:"break-word"},[`${o}-content`]:{position:"relative",backgroundColor:e.modalContentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadowSecondary,pointerEvents:"auto",padding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`},[`${o}-close`]:d({position:"absolute",top:(e.modalHeaderCloseSize-e.modalCloseBtnSize)/2,insetInlineEnd:(e.modalHeaderCloseSize-e.modalCloseBtnSize)/2,zIndex:e.zIndexPopupBase+10,padding:0,color:e.modalCloseColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalConfirmIconSize,height:e.modalConfirmIconSize,border:0,outline:0,cursor:"pointer",transition:`color ${e.motionDurationMid}, background-color ${e.motionDurationMid}`,"&-x":{display:"block",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:`${e.modalCloseBtnSize}px`,textAlign:"center",textTransform:"none",textRendering:"auto"},"&:hover":{color:e.modalIconHoverColor,backgroundColor:e.wireframe?"transparent":e.colorFillContent,textDecoration:"none"},"&:active":{backgroundColor:e.wireframe?"transparent":e.colorFillContentHover}},Ke(e)),[`${o}-header`]:{color:e.colorText,background:e.modalHeaderBg,borderRadius:`${e.borderRadiusLG}px ${e.borderRadiusLG}px 0 0`,marginBottom:e.marginXS},[`${o}-body`]:{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word"},[`${o}-footer`]:{textAlign:"end",background:e.modalFooterBg,marginTop:e.marginSM,[`${e.antCls}-btn + ${e.antCls}-btn:not(${e.antCls}-dropdown-trigger)`]:{marginBottom:0,marginInlineStart:e.marginXS}},[`${o}-open`]:{overflow:"hidden"}})},{[`${o}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${o}-content,
          ${o}-body,
          ${o}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${o}-confirm-body`]:{marginBottom:"auto"}}}]},Oo=e=>{const{componentCls:o}=e,t=`${o}-confirm`;return{[t]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${t}-body-wrapper`]:d({},Xe()),[`${t}-body`]:{display:"flex",flexWrap:"wrap",alignItems:"center",[`${t}-title`]:{flex:"0 0 100%",display:"block",overflow:"hidden",color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.modalHeaderTitleFontSize,lineHeight:e.modalHeaderTitleLineHeight,[`+ ${t}-content`]:{marginBlockStart:e.marginXS,flexBasis:"100%",maxWidth:`calc(100% - ${e.modalConfirmIconSize+e.marginSM}px)`}},[`${t}-content`]:{color:e.colorText,fontSize:e.fontSize},[`> ${e.iconCls}`]:{flex:"none",marginInlineEnd:e.marginSM,fontSize:e.modalConfirmIconSize,[`+ ${t}-title`]:{flex:1},[`+ ${t}-title + ${t}-content`]:{marginInlineStart:e.modalConfirmIconSize+e.marginSM}}},[`${t}-btns`]:{textAlign:"end",marginTop:e.marginSM,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${t}-error ${t}-body > ${e.iconCls}`]:{color:e.colorError},[`${t}-warning ${t}-body > ${e.iconCls},
        ${t}-confirm ${t}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${t}-info ${t}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${t}-success ${t}-body > ${e.iconCls}`]:{color:e.colorSuccess},[`${o}-zoom-leave ${o}-btns`]:{pointerEvents:"none"}}},zo=e=>{const{componentCls:o}=e;return{[`${o}-root`]:{[`${o}-wrap-rtl`]:{direction:"rtl",[`${o}-confirm-body`]:{direction:"rtl"}}}}},No=e=>{const{componentCls:o,antCls:t}=e,n=`${o}-confirm`;return{[o]:{[`${o}-content`]:{padding:0},[`${o}-header`]:{padding:e.modalHeaderPadding,borderBottom:`${e.modalHeaderBorderWidth}px ${e.modalHeaderBorderStyle} ${e.modalHeaderBorderColorSplit}`,marginBottom:0},[`${o}-body`]:{padding:e.modalBodyPadding},[`${o}-footer`]:{padding:`${e.modalFooterPaddingVertical}px ${e.modalFooterPaddingHorizontal}px`,borderTop:`${e.modalFooterBorderWidth}px ${e.modalFooterBorderStyle} ${e.modalFooterBorderColorSplit}`,borderRadius:`0 0 ${e.borderRadiusLG}px ${e.borderRadiusLG}px`,marginTop:0}},[n]:{[`${t}-modal-body`]:{padding:`${e.padding*2}px ${e.padding*2}px ${e.paddingLG}px`},[`${n}-body`]:{[`> ${e.iconCls}`]:{marginInlineEnd:e.margin,[`+ ${n}-title + ${n}-content`]:{marginInlineStart:e.modalConfirmIconSize+e.margin}}},[`${n}-btns`]:{marginTop:e.marginLG}}}},Ao=Ve("Modal",e=>{const o=e.padding,t=e.fontSizeHeading5,n=e.lineHeightHeading5,l=_e(e,{modalBodyPadding:e.paddingLG,modalHeaderBg:e.colorBgElevated,modalHeaderPadding:`${o}px ${e.paddingLG}px`,modalHeaderBorderWidth:e.lineWidth,modalHeaderBorderStyle:e.lineType,modalHeaderTitleLineHeight:n,modalHeaderTitleFontSize:t,modalHeaderBorderColorSplit:e.colorSplit,modalHeaderCloseSize:n*t+o*2,modalContentBg:e.colorBgElevated,modalHeadingColor:e.colorTextHeading,modalCloseColor:e.colorTextDescription,modalFooterBg:"transparent",modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterPaddingVertical:e.paddingXS,modalFooterPaddingHorizontal:e.padding,modalFooterBorderWidth:e.lineWidth,modalConfirmTitleFontSize:e.fontSizeLG,modalIconHoverColor:e.colorIconHover,modalConfirmIconSize:e.fontSize*e.lineHeight,modalCloseBtnSize:e.controlHeightLG*.55});return[Mo(l),Oo(l),zo(l),Io(l),e.wireframe&&No(l),mo(l,"zoom")]});var Ho=function(e,o){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&o.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)o.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(t[n[l]]=e[n[l]]);return t};let le;const Eo=e=>{le={x:e.pageX,y:e.pageY},setTimeout(()=>le=null,100)};Co()&&po(document.documentElement,"click",Eo,!0);const Ro=()=>({prefixCls:String,visible:{type:Boolean,default:void 0},open:{type:Boolean,default:void 0},confirmLoading:{type:Boolean,default:void 0},title:w.any,closable:{type:Boolean,default:void 0},closeIcon:w.any,onOk:Function,onCancel:Function,"onUpdate:visible":Function,"onUpdate:open":Function,onChange:Function,afterClose:Function,centered:{type:Boolean,default:void 0},width:[String,Number],footer:w.any,okText:w.any,okType:String,cancelText:w.any,icon:w.any,maskClosable:{type:Boolean,default:void 0},forceRender:{type:Boolean,default:void 0},okButtonProps:_(),cancelButtonProps:_(),destroyOnClose:{type:Boolean,default:void 0},wrapClassName:String,maskTransitionName:String,transitionName:String,getContainer:{type:[String,Function,Boolean,Object],default:void 0},zIndex:Number,bodyStyle:_(),maskStyle:_(),mask:{type:Boolean,default:void 0},keyboard:{type:Boolean,default:void 0},wrapProps:Object,focusTriggerAfterClose:{type:Boolean,default:void 0},modalRender:Function,mousePosition:_()}),P=O({compatConfig:{MODE:3},name:"AModal",inheritAttrs:!1,props:J(Ro(),{width:520,confirmLoading:!1,okType:"primary"}),setup(e,o){let{emit:t,slots:n,attrs:l}=o;const[s]=ie("Modal"),{prefixCls:u,rootPrefixCls:f,direction:b,getPopupContainer:p}=Ue("modal",e),[m,i]=Ao(u);qe(e.visible===void 0);const a=x=>{t("update:visible",!1),t("update:open",!1),t("cancel",x),t("change",!1)},r=x=>{t("ok",x)},v=()=>{var x,h;const{okText:g=(x=n.okText)===null||x===void 0?void 0:x.call(n),okType:$,cancelText:C=(h=n.cancelText)===null||h===void 0?void 0:h.call(n),confirmLoading:T}=e;return c(Qe,null,[c(te,y({onClick:a},e.cancelButtonProps),{default:()=>[C||s.value.cancelText]}),c(te,y(y({},Be($)),{},{loading:T,onClick:r},e.okButtonProps),{default:()=>[g||s.value.okText]})])};return()=>{var x,h;const{prefixCls:g,visible:$,open:C,wrapClassName:T,centered:B,getContainer:F,closeIcon:I=(x=n.closeIcon)===null||x===void 0?void 0:x.call(n),focusTriggerAfterClose:z=!0}=e,N=Ho(e,["prefixCls","visible","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose"]),H=U(T,{[`${u.value}-centered`]:!!B,[`${u.value}-wrap-rtl`]:b.value==="rtl"});return m(c(Fo,y(y(y({},N),l),{},{rootClassName:i.value,class:U(i.value,l.class),getContainer:F||p?.value,prefixCls:u.value,wrapClassName:H,visible:C??$,onClose:a,focusTriggerAfterClose:z,transitionName:Z(f.value,"zoom",e.transitionName),maskTransitionName:Z(f.value,"fade",e.maskTransitionName),mousePosition:(h=N.mousePosition)!==null&&h!==void 0?h:le}),d(d({},n),{footer:n.footer||v,closeIcon:()=>c("span",{class:`${u.value}-close-x`},[I||c(ke,{class:`${u.value}-close-icon`},null)])})))}}}),Do=()=>{const e=S(!1);return ae(()=>{e.value=!0}),e},Lo={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:_(),emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function Ce(e){return!!(e&&e.then)}const ye=O({compatConfig:{MODE:3},name:"ActionButton",props:Lo,setup(e,o){let{slots:t}=o;const n=S(!1),l=S(),s=S(!1);let u;const f=Do();Ye(()=>{e.autofocus&&(u=setTimeout(()=>{var i,a;return(a=(i=Ze(l.value))===null||i===void 0?void 0:i.focus)===null||a===void 0?void 0:a.call(i)}))}),ae(()=>{clearTimeout(u)});const b=function(){for(var i,a=arguments.length,r=new Array(a),v=0;v<a;v++)r[v]=arguments[v];(i=e.close)===null||i===void 0||i.call(e,...r)},p=i=>{Ce(i)&&(s.value=!0,i.then(function(){f.value||(s.value=!1),b(...arguments),n.value=!1},a=>(f.value||(s.value=!1),n.value=!1,Promise.reject(a))))},m=i=>{const{actionFn:a}=e;if(n.value)return;if(n.value=!0,!a){b();return}let r;if(e.emitEvent){if(r=a(i),e.quitOnNullishReturnValue&&!Ce(r)){n.value=!1,b(i);return}}else if(a.length)r=a(e.close),n.value=!1;else if(r=a(),!r){b();return}p(r)};return()=>{const{type:i,prefixCls:a,buttonProps:r}=e;return c(te,y(y(y({},Be(i)),{},{onClick:m,loading:s.value,prefixCls:a},r),{},{ref:l}),t)}}});function V(e){return typeof e=="function"?e():e}const Pe=O({name:"ConfirmDialog",inheritAttrs:!1,props:["icon","onCancel","onOk","close","closable","zIndex","afterClose","visible","open","keyboard","centered","getContainer","maskStyle","okButtonProps","cancelButtonProps","okType","prefixCls","okCancel","width","mask","maskClosable","okText","cancelText","autoFocusButton","transitionName","maskTransitionName","type","title","content","direction","rootPrefixCls","bodyStyle","closeIcon","modalRender","focusTriggerAfterClose","wrapClassName","confirmPrefixCls","footer"],setup(e,o){let{attrs:t}=o;const[n]=ie("Modal");return()=>{const{icon:l,onCancel:s,onOk:u,close:f,okText:b,closable:p=!1,zIndex:m,afterClose:i,keyboard:a,centered:r,getContainer:v,maskStyle:x,okButtonProps:h,cancelButtonProps:g,okCancel:$,width:C=416,mask:T=!0,maskClosable:B=!1,type:F,open:I,title:z,content:N,direction:H,closeIcon:D,modalRender:L,focusTriggerAfterClose:K,rootPrefixCls:A,bodyStyle:W,wrapClassName:j,footer:E}=e;let M=l;if(!l&&l!==null)switch(F){case"info":M=c(no,null,null);break;case"success":M=c(oo,null,null);break;case"error":M=c(eo,null,null);break;default:M=c(Je,null,null)}const ee=e.okType||"primary",oe=e.prefixCls||"ant-modal",X=`${oe}-confirm`,Ae=t.style||{},se=$??F==="confirm",ce=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",k=`${oe}-confirm`,He=U(k,`${k}-${e.type}`,{[`${k}-rtl`]:H==="rtl"},t.class),ne=n.value,Ee=se&&c(ye,{actionFn:s,close:f,autofocus:ce==="cancel",buttonProps:g,prefixCls:`${A}-btn`},{default:()=>[V(e.cancelText)||ne.cancelText]});return c(P,{prefixCls:oe,class:He,wrapClassName:U({[`${k}-centered`]:!!r},j),onCancel:Re=>f?.({triggerCancel:!0},Re),open:I,title:"",footer:"",transitionName:Z(A,"zoom",e.transitionName),maskTransitionName:Z(A,"fade",e.maskTransitionName),mask:T,maskClosable:B,maskStyle:x,style:Ae,bodyStyle:W,width:C,zIndex:m,afterClose:i,keyboard:a,centered:r,getContainer:v,closable:p,closeIcon:D,modalRender:L,focusTriggerAfterClose:K},{default:()=>[c("div",{class:`${X}-body-wrapper`},[c("div",{class:`${X}-body`},[V(M),z===void 0?null:c("span",{class:`${X}-title`},[V(z)]),c("div",{class:`${X}-content`},[V(N)])]),E!==void 0?V(E):c("div",{class:`${X}-btns`},[Ee,c(ye,{type:ee,actionFn:u,close:f,autofocus:ce==="ok",buttonProps:h,prefixCls:`${A}-btn`},{default:()=>[V(b)||(se?ne.okText:ne.justOkText)]})])])]})}}}),R=[],q=e=>{const o=document.createDocumentFragment();let t=d(d({},Te(e,["parentContext","appContext"])),{close:s,open:!0}),n=null;function l(){n&&(de(null,o),n=null);for(var p=arguments.length,m=new Array(p),i=0;i<p;i++)m[i]=arguments[i];const a=m.some(r=>r&&r.triggerCancel);e.onCancel&&a&&e.onCancel(()=>{},...m.slice(1));for(let r=0;r<R.length;r++)if(R[r]===s){R.splice(r,1);break}}function s(){for(var p=arguments.length,m=new Array(p),i=0;i<p;i++)m[i]=arguments[i];t=d(d({},t),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),l.apply(this,m)}}),t.visible&&delete t.visible,u(t)}function u(p){typeof p=="function"?t=p(t):t=d(d({},t),p),n&&go(n,t,o)}const f=p=>{const m=to,i=m.prefixCls,a=p.prefixCls||`${i}-modal`,r=m.iconPrefixCls,v=lo();return c(ao,y(y({},m),{},{prefixCls:i}),{default:()=>[c(Pe,y(y({},p),{},{rootPrefixCls:i,prefixCls:a,iconPrefixCls:r,locale:v,cancelText:p.cancelText||v.cancelText}),null)]})};function b(p){const m=c(f,d({},p));return m.appContext=e.parentContext||e.appContext||m.appContext,de(m,o),m}return n=b(t),R.push(s),{destroy:s,update:u}};function Fe(e){return d(d({},e),{type:"warning"})}function Ie(e){return d(d({},e),{type:"info"})}function Me(e){return d(d({},e),{type:"success"})}function Oe(e){return d(d({},e),{type:"error"})}function ze(e){return d(d({},e),{type:"confirm"})}const Wo=()=>({config:Object,afterClose:Function,destroyAction:Function,open:Boolean}),jo=O({name:"HookModal",inheritAttrs:!1,props:J(Wo(),{config:{width:520,okType:"primary"}}),setup(e,o){let{expose:t}=o;var n;const l=Q(()=>e.open),s=Q(()=>e.config),{direction:u,getPrefixCls:f}=io(),b=f("modal"),p=f(),m=()=>{var v,x;e?.afterClose(),(x=(v=s.value).afterClose)===null||x===void 0||x.call(v)},i=function(){e.destroyAction(...arguments)};t({destroy:i});const a=(n=s.value.okCancel)!==null&&n!==void 0?n:s.value.type==="confirm",[r]=ie("Modal",ro.Modal);return()=>c(Pe,y(y({prefixCls:b,rootPrefixCls:p},s.value),{},{close:i,open:l.value,afterClose:m,okText:s.value.okText||(a?r?.value.okText:r?.value.justOkText),direction:s.value.direction||u.value,cancelText:s.value.cancelText||r?.value.cancelText}),null)}});let be=0;const Vo=O({name:"ElementsHolder",inheritAttrs:!1,setup(e,o){let{expose:t}=o;const n=S([]);return t({addModal:s=>(n.value.push(s),n.value=n.value.slice(),()=>{n.value=n.value.filter(u=>u!==s)})}),()=>n.value.map(s=>s())}});function _o(){const e=S(null),o=S([]);Y(o,()=>{o.value.length&&([...o.value].forEach(u=>{u()}),o.value=[])},{immediate:!0});const t=s=>function(f){var b;be+=1;const p=S(!0),m=S(null),i=S(so(f)),a=S({});Y(()=>f,C=>{h(d(d({},co(C)?C.value:C),a.value))});const r=function(){p.value=!1;for(var C=arguments.length,T=new Array(C),B=0;B<C;B++)T[B]=arguments[B];const F=T.some(I=>I&&I.triggerCancel);i.value.onCancel&&F&&i.value.onCancel(()=>{},...T.slice(1))};let v;const x=()=>c(jo,{key:`modal-${be}`,config:s(i.value),ref:m,open:p.value,destroyAction:r,afterClose:()=>{v?.()}},null);v=(b=e.value)===null||b===void 0?void 0:b.addModal(x),v&&R.push(v);const h=C=>{i.value=d(d({},i.value),C)};return{destroy:()=>{m.value?r():o.value=[...o.value,r]},update:C=>{a.value=C,m.value?h(C):o.value=[...o.value,()=>h(C)]}}},n=Q(()=>({info:t(Ie),success:t(Me),error:t(Oe),warning:t(Fe),confirm:t(ze)})),l=Symbol("modalHolderKey");return[n.value,()=>c(Vo,{key:l,ref:e},null)]}function Ne(e){return q(Fe(e))}P.useModal=_o;P.info=function(o){return q(Ie(o))};P.success=function(o){return q(Me(o))};P.error=function(o){return q(Oe(o))};P.warning=Ne;P.warn=Ne;P.confirm=function(o){return q(ze(o))};P.destroyAll=function(){for(;R.length;){const o=R.pop();o&&o()}};P.install=function(e){return e.component(P.name,P),e};function Qo(){const e=G("");return{errorMessage:e,clearError:()=>{e.value=""},handleError:l=>{if(console.error(l),l.response?.status===409)e.value="数据冲突：其他用户可能已修改此数据，请刷新页面重试";else if(l.response?.data?.detail)e.value=l.response.data.detail;else if(l.response?.data){const s=l.response.data,u=[];for(const f in s)Array.isArray(s[f])?u.push(`${f}: ${s[f].join(", ")}`):u.push(`${f}: ${s[f]}`);e.value=u.join("; ")}else e.value=l.message||"操作失败，请重试"},showError:l=>{e.value=l}}}export{P as M,Do as a,Qo as u};
