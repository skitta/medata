import{c as t,I as V,d as Y,u as z,r as q,a as N,l as L,n as U,b as h,o as d,g as R,w as a,O as b,Q as x,B as p,e,i as O,S as A,h as k,U as $}from"./index-BhHKsdmV.js";import{F as D,A as y}from"./index-BBhBT8Pw.js";import{D as H,A as Q}from"./index-CWq_LatF.js";import{I as G,S as J}from"./index-zHM7v96u.js";import{B as I,C as W}from"./index-DcXvgCjb.js";import{P as X}from"./PlusOutlined-N5e3bSjW.js";import{a as v,A as w}from"./index-BrL_LTco.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BMKGhP6v.js";import"./hasIn-CsO9C-3B.js";import"./js.cookie-zE7E1cTn.js";import"./Col-CzR3t48K.js";import"./index-BeimMwKc.js";import"./useMergedState-B8DTPsKU.js";var K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};function P(n){for(var l=1;l<arguments.length;l++){var r=arguments[l]!=null?Object(arguments[l]):{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(f){return Object.getOwnPropertyDescriptor(r,f).enumerable}))),o.forEach(function(f){ee(n,f,r[f])})}return n}function ee(n,l,r){return l in n?Object.defineProperty(n,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[l]=r,n}var M=function(l,r){var o=P({},l,r.attrs);return t(V,P({},o,{icon:K}),null)};M.displayName="MinusCircleOutlined";M.inheritAttrs=!1;const ae={class:"inline-form-overflow"},te={class:"inline-form"},le=Y({__name:"InlineForm",props:{name:{type:String,required:!0},label:{type:String,required:!0},fields:{type:Object},span:{type:String,default:"3"}},setup(n){const l=n,r=z(),o=q({datas:r.getTestByName(l.name)??[]}),f=N(!1),_=N(!0),F=L(()=>i=>i.id!==void 0),T=i=>{let u=o.datas.indexOf(i);u!==-1&&o.datas.splice(u,1)},j=()=>{let i={};for(let u in l.fields)i[u]="";o.datas.push(i)},C=()=>{f.value=!0};let S=r.getTestByName(l.name)?.length??0;const E=()=>{o.datas.length===0?(r.delTest(l.name),S=0):(r.addTests({name:l.name,data:$(o.datas)}),S=r.getTestByName(l.name).length),f.value=!1};return U([f,_],([i,u])=>{i===!1&&u===!1?o.datas.forEach(s=>{s.id===void 0?r.addComplete({name:l.name,data:!0}):r.delComplete(l.name)}):r.addComplete({name:l.name,data:!1})}),U(o.datas,i=>{f.value=i.length!==S,i.forEach(u=>{for(let s in u)if(u[s]===""){_.value=!0;return}_.value=!1})}),(i,u)=>(d(),h("div",ae,[R("div",te,[t(e(w),{class:"table-row title"},{default:a(()=>[(d(!0),h(b,null,x(n.fields,(s,B)=>(d(),h(b,{key:B},[s.type==="date"?(d(),p(e(v),{key:0,span:5},{default:a(()=>u[0]||(u[0]=[O("日期")])),_:1,__:[0]})):(d(),p(e(v),{key:1,span:n.span},{default:a(()=>[O(A(s.label),1)]),_:2},1032,["span"]))],64))),128))]),_:1}),t(e(w),null,{default:a(()=>[t(e(v),{span:24},{default:a(()=>[t(e(D),{name:n.name,layout:"inline",model:o},{default:a(()=>[(d(!0),h(b,null,x(o.datas,(s,B)=>(d(),p(e(w),{key:B,class:"table-row"},{default:a(()=>[(d(!0),h(b,null,x(n.fields,(c,m)=>(d(),h(b,{key:m},[c.type==="date"?(d(),p(e(v),{key:0,span:5},{default:a(()=>[t(e(y),{name:"date"},{default:a(()=>[t(e(H),{value:s.date,"onUpdate:value":g=>s.date=g,placeholder:"选择日期","value-format":"YYYY-MM-DD",style:{width:"100%"},onChange:C},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1024)):c.type==="number"?(d(),p(e(v),{key:1,span:n.span},{default:a(()=>[t(e(y),{name:m},{default:a(()=>[t(e(Q),{value:s[m],"onUpdate:value":g=>s[m]=g,placeholder:c.label,onChange:C},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1032,["span"])):c.type==="string"?(d(),p(e(v),{key:2,span:n.span},{default:a(()=>[t(e(y),{name:m},{default:a(()=>[t(e(G),{value:s[m],"onUpdate:value":g=>s[m]=g,placeholder:c.label,onChange:C},null,8,["value","onUpdate:value","placeholder"])]),_:2},1032,["name"])]),_:2},1032,["span"])):c.type==="select"?(d(),p(e(v),{key:3,span:n.span},{default:a(()=>[t(e(y),{name:m},{default:a(()=>[t(e(J),{value:s[m],"onUpdate:value":g=>s[m]=g,options:c.options??[],placeholder:c.label,onChange:C},null,8,["value","onUpdate:value","options","placeholder"])]),_:2},1032,["name"])]),_:2},1032,["span"])):k("",!0)],64))),128)),t(e(v),{span:1},{default:a(()=>[o.datas.length>0?(d(),p(e(y),{key:0,style:{margin:"0"}},{default:a(()=>[t(e(I),{type:"link",disabled:F.value(s),onClick:c=>T(s),style:{padding:"2px"}},{default:a(()=>[t(e(M))]),_:2},1032,["disabled","onClick"])]),_:2},1024)):k("",!0)]),_:2},1024)]),_:2},1024))),128)),t(e(w),null,{default:a(()=>[t(e(v),null,{default:a(()=>[t(e(y),{"wrapper-col":{span:24},style:{"margin-left":"10px"}},{default:a(()=>[t(e(I),{type:"dashed",onClick:j},{default:a(()=>[t(e(X)),O(" 添加"+A(n.label),1)]),_:1}),f.value?(d(),p(e(I),{key:0,type:"primary",style:{"margin-left":"10px"},onClick:E,disabled:_.value},{default:a(()=>[t(e(W)),u[1]||(u[1]=O(" 保存 "))]),_:1,__:[1]},8,["disabled"])):k("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["name","model"])]),_:1})]),_:1})])]))}}),ye=Z(le,[["__scopeId","data-v-33d2a18d"]]);export{ye as default};
