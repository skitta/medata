/* empty css                */import{F as N,_ as G}from"./index-C5EvdOSD.js";import"./index-Bs59S7SY.js";import{B as V}from"./index-CKpO3Wyb.js";import{C as $}from"./index-BdYYenth.js";import{I as j,S as D}from"./index-CSg5cDbo.js";import{D as E,_ as z}from"./index-Co12GfzI.js";import"./index-CqDKeIc1.js";import{c as t,I as J,_ as Q,d as X,a as v,o,f as Z,w as n,K as y,L as F,z as _,h as O,O as A,g as I,u as K,r as x,b as M,M as ee,n as U,N as ae}from"./index-DFZFHgnd.js";import{P as L}from"./PlusOutlined-CUymhBc9.js";import{_ as Y,a as R}from"./index-Bk2m-043.js";import"./index-DB7tIDCQ.js";import"./_flatRest-CcNSYLso.js";import"./js.cookie-Bd2-tppU.js";import"./useState-Rb6RYO6z.js";import"./createForOfIteratorHelper-SBXSWyxR.js";var ne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"};function T(e){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?Object(arguments[a]):{},d=Object.keys(l);typeof Object.getOwnPropertySymbols=="function"&&(d=d.concat(Object.getOwnPropertySymbols(l).filter(function(m){return Object.getOwnPropertyDescriptor(l,m).enumerable}))),d.forEach(function(m){te(e,m,l[m])})}return e}function te(e,a,l){return a in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}var w=function(a,l){var d=T({},a,l.attrs);return t(J,T({},d,{icon:ne}),null)};w.displayName="MinusCircleOutlined";w.inheritAttrs=!1;const{Item:le}=N,oe=X({name:"InlineForm",components:{AForm:N,AFormItem:le,ADatePicker:E,AInput:j,AInputNumber:z,ARow:R,ACol:Y,AButton:V,ASelect:D,MinusCircleOutlined:w,PlusOutlined:L,CheckOutlined:$},props:{name:{type:String},label:{type:String},fields:{type:Object,default:()=>({date:{type:"date",label:"日期"},wbc:{type:"number",label:"WBC"},ne:{type:"percentage",label:"NE%"},label:{type:"string",label:"标签"},gender:{type:"select",label:"性别",options:[{value:"F",label:"Female"}]},rbc:{type:"number",label:"RBC"},plt:{type:"number",label:"PLT"}})},span:{type:String,default:"3"}},setup(e){var C;const a=K(),l=x({datas:a.getters.getTestByName(e.name)??[]}),d=M(!1),m=M(!0),P=ee(()=>s=>s.id!==void 0),u=s=>{let i=l.datas.indexOf(s);i!==-1&&l.datas.splice(i,1)},b=()=>{let s={};for(let i in e.fields)s[i]="";l.datas.push(s)},S=()=>{d.value=!0};let p=((C=a.getters.getTestByName(e.name))==null?void 0:C.length)??0;const k=()=>{l.datas.length===0?(a.dispatch("delTest",e.name),p=0):(a.dispatch("addTests",{name:e.name,data:ae(l.datas)}),p=a.getters.getTestByName(e.name).length),d.value=!1};return U([d,m],([s,i])=>{s===!1&&i===!1?l.datas.forEach(h=>{h.id===void 0?a.dispatch("addComplete",{name:e.name,data:!0}):a.dispatch("delComplete",e.name)}):a.dispatch("addComplete",{name:e.name,data:!1})}),U(l.datas,s=>{d.value=s.length!==p,s.forEach(i=>{for(let h in i)if(i[h]===""){m.value=!0;return}m.value=!1})}),{dynamicValidateForm:l,showSaveButton:d,removeDomain:u,addDomain:b,handleChange:S,onSave:k,disableSave:m,disableDelete:P}}}),se={class:"inline-form-overflow"},re={class:"inline-form"};function de(e,a,l,d,m,P){const u=Y,b=R,S=E,p=G,k=z,C=j,s=D,i=w,h=V,H=L,W=$,q=N;return o(),v("div",se,[Z("div",re,[t(b,{class:"table-row title"},{default:n(()=>[(o(!0),v(y,null,F(e.fields,(r,B)=>(o(),v(y,{key:B},[r.type==="date"?(o(),_(u,{key:0,span:5},{default:n(()=>a[0]||(a[0]=[O("日期")])),_:1,__:[0]})):(o(),_(u,{key:1,span:e.span},{default:n(()=>[O(A(r.label),1)]),_:2},1032,["span"]))],64))),128))]),_:1}),t(b,null,{default:n(()=>[t(u,{span:24},{default:n(()=>[t(q,{name:e.name,layout:"inline",model:e.dynamicValidateForm},{default:n(()=>[(o(!0),v(y,null,F(e.dynamicValidateForm.datas,(r,B)=>(o(),_(b,{key:B,class:"table-row"},{default:n(()=>[(o(!0),v(y,null,F(e.fields,(f,c)=>(o(),v(y,{key:c},[f.type==="date"?(o(),_(u,{key:0,span:5},{default:n(()=>[t(p,{name:"date"},{default:n(()=>[t(S,{value:r.date,"onUpdate:value":g=>r.date=g,placeholder:"选择日期","value-format":"YYYY-MM-DD",style:{width:"100%"},onChange:e.handleChange},null,8,["value","onUpdate:value","onChange"])]),_:2},1024)]),_:2},1024)):f.type==="number"?(o(),_(u,{key:1,span:e.span},{default:n(()=>[t(p,{name:c},{default:n(()=>[t(k,{value:r[c],"onUpdate:value":g=>r[c]=g,placeholder:f.label,onChange:e.handleChange},null,8,["value","onUpdate:value","placeholder","onChange"])]),_:2},1032,["name"])]),_:2},1032,["span"])):f.type==="string"?(o(),_(u,{key:2,span:e.span},{default:n(()=>[t(p,{name:c},{default:n(()=>[t(C,{value:r[c],"onUpdate:value":g=>r[c]=g,placeholder:f.label,onChange:e.handleChange},null,8,["value","onUpdate:value","placeholder","onChange"])]),_:2},1032,["name"])]),_:2},1032,["span"])):f.type==="select"?(o(),_(u,{key:3,span:e.span},{default:n(()=>[t(p,{name:c},{default:n(()=>[t(s,{value:r[c],"onUpdate:value":g=>r[c]=g,options:f.options,placeholder:f.label,onChange:e.handleChange},null,8,["value","onUpdate:value","options","placeholder","onChange"])]),_:2},1032,["name"])]),_:2},1032,["span"])):I("",!0)],64))),128)),t(u,{span:1},{default:n(()=>[e.dynamicValidateForm.datas.length>0?(o(),_(p,{key:0,style:{margin:"0"}},{default:n(()=>[t(h,{type:"link",disabled:e.disableDelete(r),onClick:f=>e.removeDomain(r),style:{padding:"2px"}},{default:n(()=>[t(i)]),_:2},1032,["disabled","onClick"])]),_:2},1024)):I("",!0)]),_:2},1024)]),_:2},1024))),128)),t(b,null,{default:n(()=>[t(u,null,{default:n(()=>[t(p,{"wrapper-col":{span:24},style:{"margin-left":"10px"}},{default:n(()=>[t(h,{type:"dashed",onClick:e.addDomain},{default:n(()=>[t(H),O(" 添加"+A(e.label),1)]),_:1},8,["onClick"]),e.showSaveButton?(o(),_(h,{key:0,type:"primary",style:{"margin-left":"10px"},onClick:e.onSave,disabled:e.disableSave},{default:n(()=>[t(W),a[1]||(a[1]=O(" 保存 "))]),_:1,__:[1]},8,["onClick","disabled"])):I("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["name","model"])]),_:1})]),_:1})])])}const ke=Q(oe,[["render",de],["__scopeId","data-v-17118422"]]);export{ke as default};
