"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[365],{1365:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var l=a(3396);const r=(0,l.Uk)("男"),u=(0,l.Uk)("女"),o=(0,l.Uk)("确认"),n=(0,l._)("p",null,"确认后将无法更改，是否确认？",-1);function i(e,t,a,i,s,m){const d=(0,l.up)("a-input"),g=(0,l.up)("a-form-item"),p=(0,l.up)("a-select-option"),v=(0,l.up)("a-select"),f=(0,l.up)("a-input-number"),c=(0,l.up)("a-date-picker"),b=(0,l.up)("a-button"),w=(0,l.up)("a-form"),_=(0,l.up)("a-modal");return(0,l.wg)(),(0,l.iD)("div",null,[(0,l.Wm)(w,{name:"Patient",ref:"formRef",model:e.formState,rules:e.rules,"label-col":{span:4},"wrapper-col":{span:18}},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{label:"登记号",name:"registered_ID"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{value:e.formState.registered_ID,"onUpdate:value":t[0]||(t[0]=t=>e.formState.registered_ID=t)},null,8,["value"])])),_:1}),(0,l.Wm)(g,{label:"住院号",name:"document_ID"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{value:e.formState.document_ID,"onUpdate:value":t[1]||(t[1]=t=>e.formState.document_ID=t)},null,8,["value"])])),_:1}),(0,l.Wm)(g,{label:"姓名",name:"full_name"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{value:e.formState.full_name,"onUpdate:value":t[2]||(t[2]=t=>e.formState.full_name=t)},null,8,["value"])])),_:1}),(0,l.Wm)(g,{label:"性别",name:"gender"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{value:e.formState.gender,"onUpdate:value":t[3]||(t[3]=t=>e.formState.gender=t)},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{value:"M"},{default:(0,l.w5)((()=>[r])),_:1}),(0,l.Wm)(p,{value:"F"},{default:(0,l.w5)((()=>[u])),_:1})])),_:1},8,["value"])])),_:1}),(0,l.Wm)(g,{label:"年龄(月)",name:"age"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{value:e.formState.age,"onUpdate:value":t[4]||(t[4]=t=>e.formState.age=t),style:{width:"100%"}},null,8,["value"])])),_:1}),(0,l.Wm)(g,{label:"入院日期",name:"in_date"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{value:e.formState.in_date,"onUpdate:value":t[5]||(t[5]=t=>e.formState.in_date=t),"value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["value"])])),_:1}),(0,l.Wm)(g,{label:"身高(cm)",name:"height"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{value:e.formState.height,"onUpdate:value":t[6]||(t[6]=t=>e.formState.height=t),style:{width:"100%"}},null,8,["value"])])),_:1}),(0,l.Wm)(g,{label:"体重(kg)",name:"weight"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,{value:e.formState.weight,"onUpdate:value":t[7]||(t[7]=t=>e.formState.weight=t),style:{width:"100%"}},null,8,["value"])])),_:1}),(0,l.Wm)(g,{label:"分组",value:e.formState.group,"onUpdate:value":t[9]||(t[9]=t=>e.formState.group=t),name:"group"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{value:e.formState.group,"onUpdate:value":t[8]||(t[8]=t=>e.formState.group=t),options:e.groupOptions},null,8,["value","options"])])),_:1},8,["value"]),(0,l.Wm)(g,{label:"状态",value:e.formState.status,"onUpdate:value":t[11]||(t[11]=t=>e.formState.status=t),name:"status"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{value:e.formState.status,"onUpdate:value":t[10]||(t[10]=t=>e.formState.status=t),options:e.statusOptions},null,8,["value","options"])])),_:1},8,["value"]),(0,l.Wm)(g,{"wrapper-col":{span:14,offset:4}},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{type:"primary",onClick:e.showModal},{default:(0,l.w5)((()=>[o])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"]),(0,l.Wm)(_,{visible:e.visible,"onUpdate:visible":t[12]||(t[12]=t=>e.visible=t),title:"确认信息",onOk:e.handleOk},{default:(0,l.w5)((()=>[n])),_:1},8,["visible","onOk"])])}a(1184);var s=a(3943),m=(a(4535),a(5676)),d=(a(5703),a(5835)),g=(a(367),a(9678)),p=(a(4348),a(278)),v=(a(6186),a(4642)),f=(a(6566),a(6507)),c=a(4870),b=a(65);const{Item:w}=f.ZP,{Option:_}=v.ZP;var h=(0,l.aZ)({name:"PatientForm",components:{AForm:f.ZP,AFormItem:w,AInput:p.ZP,ASelect:v.ZP,ASelectOption:_,ADatePicker:g.ZP,AInputNumber:d.Z,AButton:m.Z,AModal:s.Z},setup(){const e=(0,c.iH)(),t=(0,c.qj)({registered_ID:"",document_ID:"",full_name:"",gender:"",age:void 0,in_date:void 0,height:void 0,weight:void 0,group:"",status:""}),a=(0,c.iH)([]),r=(0,c.iH)([{label:"在院",value:"1"},{label:"随访中",value:"2"},{label:"已完成",value:"3"}]),u=(0,c.iH)(!1),o=(0,l.FN)(),{$http:n}=o.appContext.config.globalProperties,i=(0,b.oR)(),s={Authorization:`Token ${i.getters.getToken}`},m=async()=>{try{const e=await n.get("/kawasaki/enrollGroups/",{headers:s});a.value=e.data.results.map((e=>({value:e.id,label:e.name}))),i.dispatch("setGroups",a.value)}catch(e){console.log(e)}};let d=async(e,t)=>t?Number.isInteger(t)?t<0?Promise.reject("年龄不能小于0"):Promise.resolve():Promise.reject("年龄必须为整数"):Promise.reject("请输入年龄"),g=async(e,t)=>t?t<0?Promise.reject("不能小于0"):Promise.resolve():Promise.reject("请输入数字");const p=async(e,t)=>{if(!t)return Promise.reject("请输入登记号");try{const e=await n.get(`/kawasaki/patients?search=${t}`,{headers:s});if(e.data.count>0)return Promise.reject("登记号已存在")}catch(a){console.log(a)}return Promise.resolve()},v={registered_ID:[{required:!0,validator:p,trigger:"blur"}],document_ID:[{required:!0,message:"请输入住院号",trigger:"blur"}],full_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],gender:[{required:!0,message:"请选择性别",trigger:"blur"}],age:[{required:!0,validator:d,trigger:"blur"}],in_date:[{required:!0,message:"请选择日期",trigger:"blur"}],height:[{required:!0,validator:g,trigger:"blur"}],weight:[{required:!0,validator:g,trigger:"blur"}],group:[{required:!0,message:"请选择分组",trigger:"blur"}],status:[{required:!0,message:"请选择状态",trigger:"blur"}]},f=()=>{e.value.validate().then((()=>{u.value=!0})).catch((e=>{console.log(e)}))},w=()=>{i.dispatch("setPatient",(0,c.IU)(t)),u.value=!1};return(0,l.bv)((async()=>{await m()})),{formRef:e,formState:t,rules:v,groupOptions:a,statusOptions:r,visible:u,showModal:f,handleOk:w}}}),S=a(89);const W=(0,S.Z)(h,[["render",i]]);var k=W}}]);
//# sourceMappingURL=365.7dc8f241.js.map