const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["static/index-Cpi2KEfk.js","static/index-DIUhM0Ao.js","static/index-BiGCB4QH.js","static/index-D3TnAsSd.css"])))=>i.map(i=>d[i]);
import{c as o,i as W,m as Y,_ as S,E as Z,d as I,j as tt,x as L,F as et,G as k,H as nt,J as at,K as G,a as w,q as X,L as ot,t as lt,b as T,w as d,e as i,M as j,N as V,o as y,h as A,O as b,Q as D,f as U,A as E}from"./index-BiGCB4QH.js";import{g as it,a as st,b as rt}from"./kawasaki-DZtnSqoT.js";import{S as ut}from"./index-CoKPGHPi.js";import{A as $,a as h}from"./index-CDGnLlcn.js";import{S as ct,C as F}from"./index-qypLa9ml.js";import{i as q}from"./index-DIUhM0Ao.js";import{o as dt}from"./Dropdown-BEWj0Aq1.js";import"./Col-b7LGXneF.js";import"./hasIn-Chqo4bGS.js";import"./useMergedState-DAsMUKIf.js";import"./PlusOutlined-B_beIY8w.js";const J=n=>{const{value:t,formatter:l,precision:s,decimalSeparator:r,groupSeparator:m="",prefixCls:g}=n;let p;if(typeof l=="function")p=l({value:t});else{const u=String(t),v=u.match(/^(-?)(\d*)(\.(\d+))?$/);if(!v)p=u;else{const f=v[1];let e=v[2]||"0",a=v[4]||"";e=e.replace(/\B(?=(\d{3})+(?!\d))/g,m),typeof s=="number"&&(a=a.padEnd(s,"0").slice(0,s>0?s:0)),a&&(a=`${r}${a}`),p=[o("span",{key:"int",class:`${g}-content-value-int`},[f,e]),a&&o("span",{key:"decimal",class:`${g}-content-value-decimal`},[a])]}}return o("span",{class:`${g}-content-value`},[p])};J.displayName="StatisticNumber";const ft=n=>{const{componentCls:t,marginXXS:l,padding:s,colorTextDescription:r,statisticTitleFontSize:m,colorTextHeading:g,statisticContentFontSize:p,statisticFontFamily:u}=n;return{[`${t}`]:S(S({},Z(n)),{[`${t}-title`]:{marginBottom:l,color:r,fontSize:m},[`${t}-skeleton`]:{paddingTop:s},[`${t}-content`]:{color:g,fontSize:p,fontFamily:u,[`${t}-content-value`]:{display:"inline-block",direction:"ltr"},[`${t}-content-prefix, ${t}-content-suffix`]:{display:"inline-block"},[`${t}-content-prefix`]:{marginInlineEnd:l},[`${t}-content-suffix`]:{marginInlineStart:l}}})}},mt=W("Statistic",n=>{const{fontSizeHeading3:t,fontSize:l,fontFamily:s}=n,r=Y(n,{statisticTitleFontSize:l,statisticContentFontSize:t,statisticFontFamily:s});return[ft(r)]}),K=()=>({prefixCls:String,decimalSeparator:String,groupSeparator:String,format:String,value:G([Number,String,Object]),valueStyle:{type:Object,default:void 0},valueRender:at(),formatter:nt(),precision:Number,prefix:k(),suffix:k(),title:k(),loading:et()}),_=I({compatConfig:{MODE:3},name:"AStatistic",inheritAttrs:!1,props:q(K(),{decimalSeparator:".",groupSeparator:",",loading:!1}),slots:Object,setup(n,t){let{slots:l,attrs:s}=t;const{prefixCls:r,direction:m}=tt("statistic",n),[g,p]=mt(r);return()=>{var u,v,f,e,a,c,x;const{value:M=0,valueStyle:N,valueRender:O}=n,C=r.value,P=(u=n.title)!==null&&u!==void 0?u:(v=l.title)===null||v===void 0?void 0:v.call(l),z=(f=n.prefix)!==null&&f!==void 0?f:(e=l.prefix)===null||e===void 0?void 0:e.call(l),B=(a=n.suffix)!==null&&a!==void 0?a:(c=l.suffix)===null||c===void 0?void 0:c.call(l),Q=(x=n.formatter)!==null&&x!==void 0?x:l.formatter;let R=o(J,L({"data-for-update":Date.now()},S(S({},n),{prefixCls:C,value:M,formatter:Q})),null);return O&&(R=O(R)),g(o("div",L(L({},s),{},{class:[C,{[`${C}-rtl`]:m.value==="rtl"},s.class,p.value]}),[P&&o("div",{class:`${C}-title`},[P]),o(ct,{paragraph:!1,loading:n.loading},{default:()=>[o("div",{style:N,class:`${C}-content`},[z&&o("span",{class:`${C}-content-prefix`},[z]),R,B&&o("span",{class:`${C}-content-suffix`},[B])])]})]))}}}),gt=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]];function pt(n,t){let l=n;const s=/\[[^\]]*]/g,r=(t.match(s)||[]).map(u=>u.slice(1,-1)),m=t.replace(s,"[]"),g=gt.reduce((u,v)=>{let[f,e]=v;if(u.includes(f)){const a=Math.floor(l/e);return l-=a*e,u.replace(new RegExp(`${f}+`,"g"),c=>{const x=c.length;return a.toString().padStart(x,"0")})}return u},m);let p=0;return g.replace(s,()=>{const u=r[p];return p+=1,u})}function vt(n,t){const{format:l=""}=t,s=new Date(n).getTime(),r=Date.now(),m=Math.max(s-r,0);return pt(m,l)}const _t=1e3/30;function H(n){return new Date(n).getTime()}const St=()=>S(S({},K()),{value:G([Number,String,Object]),format:String,onFinish:Function,onChange:Function}),xt=I({compatConfig:{MODE:3},name:"AStatisticCountdown",props:q(St(),{format:"HH:mm:ss"}),setup(n,t){let{emit:l,slots:s}=t;const r=w(),m=w(),g=()=>{const{value:e}=n;H(e)>=Date.now()?p():u()},p=()=>{if(r.value)return;const e=H(n.value);r.value=setInterval(()=>{m.value.$forceUpdate(),e>Date.now()&&l("change",e-Date.now()),g()},_t)},u=()=>{const{value:e}=n;r.value&&(clearInterval(r.value),r.value=void 0,H(e)<Date.now()&&l("finish"))},v=e=>{let{value:a,config:c}=e;const{format:x}=n;return vt(a,S(S({},c),{format:x}))},f=e=>e;return X(()=>{g()}),ot(()=>{g()}),lt(()=>{u()}),()=>{const e=n.value;return o(_,L({ref:m},S(S({},dt(n,["onFinish","onChange"])),{value:e,valueRender:f,formatter:v})),s)}}});_.Countdown=xt;_.install=function(n){return n.component(_.name,_),n.component(_.Countdown.name,_.Countdown),n};_.Countdown;const yt={class:"nav-view-container"},ht=["id"],kt=I({__name:"DashboardView",setup(n){const t=w({sample_counts:{},groups:[],gender_counts:{},age_mean:{}}),l=w(!0),s=w(!0),r=w(!0),m=w(!0),g=w(!0),p=async()=>{t.value=await it(),l.value=!1,s.value=!1,r.value=!1},u=async()=>{const f=await st();m.value=!1,f!==null&&f.length!==0&&j(async()=>{const{Line:e}=await V(async()=>{const{Line:c}=await import("./index-Cpi2KEfk.js");return{Line:c}},__vite__mapDeps([0,1,2,3]));new e("count_line",{data:f,xField:"date",yField:"count",smooth:!0,meta:{date:{alias:"日期"},count:{alias:"样本量"}}}).render()})},v=async()=>{const f=await rt();g.value=!1;for(const[e,a]of Object.entries(f))a!==null&&a.length!==0&&j(async()=>{const{Histogram:c}=await V(async()=>{const{Histogram:N}=await import("./index-Cpi2KEfk.js");return{Histogram:N}},__vite__mapDeps([0,1,2,3])),x=`age_hist_${e.replaceAll(" ","_")}`;new c(x,{data:a,binField:"value",binWidth:1,tooltip:{showMarkers:!1,position:"top"},interactions:[{type:"element-highlight"}],meta:{range:{min:0,tickInterval:1,alias:"年龄段"},count:{max:10,tickInterval:2,nice:!0,alias:"样本量"}}}).render()})};return X(async()=>{await p(),u(),v()}),(f,e)=>(y(),T("div",yt,[o(i(ut),{direction:"vertical",size:16,style:{width:"100%"}},{default:d(()=>[o(i($),{gutter:16},{default:d(()=>[o(i(h),{xs:24,md:12,lg:8},{default:d(()=>[o(i(F),{loading:l.value},{default:d(()=>[e[0]||(e[0]=A(" 样本量 ")),o(i($),null,{default:d(()=>[(y(!0),T(b,null,D(t.value.sample_counts,(a,c)=>(y(),E(i(h),{key:c,span:t.value.groups&&t.value.groups.length?24/t.value.groups.length:24},{default:d(()=>[o(i(_),{title:c,value:a,suffix:"人"},null,8,["title","value"])]),_:2},1032,["span"]))),128))]),_:1})]),_:1,__:[0]},8,["loading"])]),_:1}),o(i(h),{xs:24,md:12,lg:8},{default:d(()=>[o(i(F),{loading:s.value},{default:d(()=>[e[1]||(e[1]=A(" 性别比例 (男:女) ")),o(i($),null,{default:d(()=>[(y(!0),T(b,null,D(t.value.gender_counts,(a,c)=>(y(),E(i(h),{key:c,span:t.value.groups&&t.value.groups.length?24/t.value.groups.length:24},{default:d(()=>[o(i(_),{title:c,value:(a.M/a.F).toFixed(2)},null,8,["title","value"])]),_:2},1032,["span"]))),128))]),_:1})]),_:1,__:[1]},8,["loading"])]),_:1}),o(i(h),{xs:24,md:12,lg:8},{default:d(()=>[o(i(F),{loading:r.value},{default:d(()=>[e[2]||(e[2]=A(" 平均年龄 ")),o(i($),null,{default:d(()=>[(y(!0),T(b,null,D(t.value.age_mean,(a,c)=>(y(),E(i(h),{key:c,span:t.value.groups&&t.value.groups.length?24/t.value.groups.length:24},{default:d(()=>[o(i(_),{title:c,value:(a/12).toFixed(2),suffix:"岁"},null,8,["title","value"])]),_:2},1032,["span"]))),128))]),_:1})]),_:1,__:[2]},8,["loading"])]),_:1})]),_:1}),o(i($),null,{default:d(()=>[o(i(h),{span:24},{default:d(()=>[o(i(F),{title:"样本-时间分布",loading:m.value},{default:d(()=>e[3]||(e[3]=[U("div",{id:"count_line"},null,-1)])),_:1,__:[3]},8,["loading"])]),_:1})]),_:1}),o(i($),{gutter:16},{default:d(()=>[(y(!0),T(b,null,D(t.value.groups,a=>(y(),E(i(h),{key:a,xs:24,lg:t.value.groups&&t.value.groups.length?24/t.value.groups.length:24},{default:d(()=>[o(i(F),{title:`年龄分布(${a})`},{default:d(()=>[U("div",{id:`age_hist_${a.replaceAll(" ","_")}`},null,8,ht)]),_:2},1032,["title"])]),_:2},1032,["lg"]))),128))]),_:1})]),_:1})]))}});export{kt as default};
