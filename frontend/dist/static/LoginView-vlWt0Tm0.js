import{c as t,I as h,d as w,u as O,r as y,a as S,b as g,w as a,e as n,o as v,f as d,g as A,h as V}from"./index-BiGCB4QH.js";import{C as L}from"./index-qypLa9ml.js";import{F as P,A as x}from"./index-DzM_ZPjP.js";import{S as C,I,A as B}from"./index-ETVDh3mm.js";import{U as E}from"./UserOutlined-Bs_lI3HP.js";import{B as U}from"./index-Cci2ZnYS.js";import{A as k}from"./index-B7_ea9DU.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DIUhM0Ao.js";import"./Dropdown-BEWj0Aq1.js";import"./hasIn-Chqo4bGS.js";import"./useMergedState-DAsMUKIf.js";import"./PlusOutlined-B_beIY8w.js";import"./Col-b7LGXneF.js";var R={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"};function _(s){for(var o=1;o<arguments.length;o++){var e=arguments[o]!=null?Object(arguments[o]):{},i=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(i=i.concat(Object.getOwnPropertySymbols(e).filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable}))),i.forEach(function(l){z(s,l,e[l])})}return s}function z(s,o,e){return o in s?Object.defineProperty(s,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[o]=e,s}var p=function(o,e){var i=_({},o,e.attrs);return t(h,_({},i,{icon:R}),null)};p.displayName="LockOutlined";p.inheritAttrs=!1;const j="/static/doctor-05z3OTPM.svg",M={class:"login"},T={class:"login-card-container"},D={key:0},F=w({__name:"LoginView",setup(s){const o=O(),e=y({username:"",password:"",role:"doctor",msg:""}),i=[{value:"doctor",label:"Doctor"},{value:"patient",label:"Patient"}],l=S(!1),b=async()=>{l.value=!0;try{await o.login({username:e.username,password:e.password})}catch(c){console.error("Login failed:",c),c.code==="ERR_NETWORK"?e.msg="网络错误":c.code==="ERR_BAD_REQUEST"?e.msg="用户名或密码错误":e.msg="未知错误"}finally{l.value=!1}},f=()=>{e.msg=""};return(c,r)=>{const m=x;return v(),g("div",M,[t(n(L),{hoverable:"",class:"login-card"},{cover:a(()=>r[3]||(r[3]=[d("div",{class:"login-cover"},[d("img",{src:j,alt:"cover"})],-1)])),default:a(()=>[d("div",T,[t(n(P),{model:e,onSubmit:b},{default:a(()=>[t(m,null,{default:a(()=>[t(n(C),{value:e.role,"onUpdate:value":r[0]||(r[0]=u=>e.role=u),options:i,placeholder:"Select a role"},null,8,["value"])]),_:1}),t(m,null,{default:a(()=>[t(n(I),{value:e.username,"onUpdate:value":r[1]||(r[1]=u=>e.username=u),placeholder:"Username",onChange:f},{prefix:a(()=>[t(n(E),{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1}),t(m,null,{default:a(()=>[t(n(B),{value:e.password,"onUpdate:value":r[2]||(r[2]=u=>e.password=u),placeholder:"Password",onChange:f},{prefix:a(()=>[t(n(p),{style:{color:"rgba(0, 0, 0, 0.25)"}})]),_:1},8,["value"])]),_:1}),t(m,null,{default:a(()=>[t(n(U),{type:"primary","html-type":"submit",disabled:e.username===""||e.password==="",loading:l.value},{default:a(()=>r[4]||(r[4]=[V(" Log in ")])),_:1,__:[4]},8,["disabled","loading"])]),_:1})]),_:1},8,["model"]),e.msg.length!=0?(v(),g("div",D,[t(n(k),{message:e.msg,type:"error","show-icon":""},null,8,["message"])])):A("",!0)])]),_:1})])}}}),re=N(F,[["__scopeId","data-v-31f6d46b"]]);export{re as default};
